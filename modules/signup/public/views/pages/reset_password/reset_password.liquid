---
slug: reset-password
max_deep_level: 1
layout_name: modules/signup/application
authorization_policies:
  - modules/signup/not_logged_in
metadata:
  title: Password reset
  stylesheets:
    - autogenerated/onboarding.css
---
<div class="container page__sign-in">
  <div class="row">
    <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6">

      {%- query_graph 'modules/signup/get_user_with_password_token', email: context.params.email, id: context.params.id, result: g -%}
      {% assign user = g.people.results.first %}
      {% assign token_valid = context.params.token | is_token_valid: user.id %}

      {% if user.id == blank or token_valid == false or user.default.password_token != context.params.token %}
        <p>Unfortunately, provided token is not valid anymore. Please <a href="/recover-password">request password instructions again</a>.</p>
      {% else %}
        {% include_form 'modules/signup/reset_password', id: @user.id %}
      {% endif %}
    </div>
  </div>
</div>
